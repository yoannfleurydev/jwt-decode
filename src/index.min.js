'use strict';

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var React = require('react');
var React__default = _interopDefault(React);
var electron = require('electron');
var TextField = _interopDefault(require('@material-ui/core/TextField'));
var Table = _interopDefault(require('@material-ui/core/Table'));
var TableBody = _interopDefault(require('@material-ui/core/TableBody'));
var TableCell = _interopDefault(require('@material-ui/core/TableCell'));
var TableHead = _interopDefault(require('@material-ui/core/TableHead'));
var TableRow = _interopDefault(require('@material-ui/core/TableRow'));
require('@material-ui/core/Paper');
var ReactDOM = _interopDefault(require('react-dom'));

const BODY = 1;

class JWT {
  /**
   * Decode the JWT and return the BODY. You can rerun this function by passing
   * the part parameter to get the HEADER.
   * @param {string} JWT The full JWT, or at least the first two parts.
   * @param {number} part One of the two const HEADER or BODY defined in JWT class.
   * @returns {string} The decoded body of the JWT by default of the HEADER if the
   * part parameter is given.
   */
  static decodeAndGetPart(JWT, part = BODY) {
    return atob(JWT.split(".")[part]);
  }
}

class App extends React.Component {
  render() {
    const body = JSON.parse(JWT.decodeAndGetPart(electron.clipboard.readText("selection")));

    return React__default.createElement(
      "div",
      null,
      React__default.createElement(TextField, {
        id: "multiline-flexible",
        multiline: true,
        value: electron.clipboard.readText("selection"),
        margin: "normal",
        readOnly: true,
        fullWidth: true
      }),
      React__default.createElement(
        Table,
        null,
        React__default.createElement(
          TableHead,
          null,
          React__default.createElement(
            TableRow,
            null,
            React__default.createElement(
              TableCell,
              null,
              "Key"
            ),
            React__default.createElement(
              TableCell,
              null,
              "Value"
            )
          )
        ),
        React__default.createElement(
          TableBody,
          null,
          Object.keys(body).map(key => {
            return React__default.createElement(
              TableRow,
              { key: key },
              React__default.createElement(
                TableCell,
                { component: "th", scope: "row" },
                key
              ),
              React__default.createElement(
                TableCell,
                null,
                body[key].toString()
              )
            );
          })
        )
      )
    );
  }
}

ReactDOM.render(React__default.createElement(App, null), document.getElementById("app"));
